<div id="title" align="center">
    <h1>Track</h1>
</div>

<div id="badges" align="center">
    你说🔥，你的修行还未结束。
</div>


## Table of Contents

+ [2020-05-25](#2020-05-25)
+ [2020-05-27](#2020-05-27)
+ [2020-05-30](#2020-05-30)

## 2020-05-25

​	觉得自己的成长速度不太够，不知道是太贪心的缘故，还是最近变颓废了，所以开了这个坑，记录每天的成长经历。

​	第一天自然不能摸了，由于以前对数据库的读写性能没有太大自信，于是今天索性测试了一下`mysql`读写性能。就跑在在之前搭的`kubernetes`集群下（🥀每错单机`minikube`版本）。用`go`+`gorm`编写的测试程序, 进行大批量数据插入和查询操作。

​	在CPU：`G2030 @3.00GHz`、内存：`12G`、`mysql:5.7`。

  **插入性能**

| 插入数据(条) | 用户态耗时(秒) | 系统耗时(秒) | 真实时间(秒) |
| ------------ | -------------- | ------------ | ------------ |
| 10           | 0.013          | 0.004        | 0.091        |
| 100          | 0.015          | 0.036        | 0.230        |
| 1000         | 0.136          | 0.301        | 1.924        |
| 10000        | 1.685          | 2.611        | 21.665       |

  **主键查询性能**

| 查询量(条) | 数据量 | 用户态耗时(秒) | 系统耗时(秒) | 真实时间(秒) |
| ---------- | ------   | -------------- | ------------ | ------------ |
| 100        | 10000    | 0.009         | 0.017       | 0.052       |
| 100        | 100000   | 0.012     | 0.015    | 0.046    |
| 100        | 1000000  | 0.011        | 0.046      | 0.046     |
|  | 1000000 | 0.367 | 0.256 | 1.035 |

**非主键查询**

| 查询量(条) | 数据量 | 用户态耗时(秒) | 系统耗时(秒) | 真实时间(秒) |
| ---------- | ------   | -------------- | ------------ | ------------ |
| 100        | 10000  | 0.009      | 0.019 | 0.091        |
| 100       | 100000  | 0.016      | 0.015   | 0.078    |
| 100      | 1000000  | 0.008        | 0.023       | 0.080        |
| 1000 | 1000000 | 0.111 | 0.130 | 1.029        |

**总结：**

+ 插入数据的性能消耗远远大于查询性能的消耗。

+ 该配置环境下，插入1000条数据耗时大概2s，10w数据量非主键查询1s达到1000条，按照主键查询1s达到4000条。
+ 主键查询时间复杂度大概o( log(n) ), 非主键查询大概O(n)。

+ 所以查询时优先使用主键查询，而且插入比查询耗时高很多(与硬盘速度有关)，通常瓶颈点在 IO > 写数据 > 读数据。



## 2020-05-27

  拖了很久, 今天终于把[Culaccino](https://github.com/arrebole/Culaccino)的`JWT`登录功能完善了。

  突然感觉自己缺少一件大技能，折中考虑可以学习写编译器。大概想象一下以后的生活，（玩逆向渗透、贡献开源社区、研究宇宙），
  那么现在的学习方向是： 掌握分布式架构（k8s）、提升程序架构设计、掌握算法、能够写编译器、深入理解操作系统。虽然有点贪心，不要求`TOP 0`的话还不错。



## 2020-05-30

得到了一些编程思想：

+ 需要经常修改的数据以配置文件的形式从程序中独立出来。而且程序不应该每次都重启才重新加载配置，配置应该支持热更新。更好的方式是，将配置独立成服务，通过远程调用的方式进行获取，这样做可以同时更新依赖相同配置的程序。

+ **断言式**编程，将不可能发生的情况，使用断言做判断，一旦发生可以排除bug

+ **变换编程**，更加关注输入和输出而不必在意框架、类、数据、结构、算法...，将程序想象成数据和代码，通过代码实现管道的效果，将数据一层一层的改变传递最后变为需要的输出，管道之间传递的数据可以使用特定的结构包装。

+ 自上而下的编程和自下而上的编程思想都有局限，构建软件的方式是增量式的。

+ **测试先行**，测试最重要的不是为了检测bug，它的重要性是带给你方向提供编程思路，考虑测试使我们减少代码中的藕合，但是不要过分执着测试而丢失大局观。测试有两种方式：基于单元测试，基于特征测试

  

